{"remainingRequest":"/Users/howie/Documents/nlp_web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/howie/Documents/nlp_web/src/views/Login/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/howie/Documents/nlp_web/src/views/Login/Login.vue","mtime":1586328728460},{"path":"/Users/howie/Documents/nlp_web/node_modules/cache-loader/dist/cjs.js","mtime":1571922489860},{"path":"/Users/howie/Documents/nlp_web/node_modules/babel-loader/lib/index.js","mtime":1571922477277},{"path":"/Users/howie/Documents/nlp_web/node_modules/cache-loader/dist/cjs.js","mtime":1571922489860},{"path":"/Users/howie/Documents/nlp_web/node_modules/vue-loader/lib/index.js","mtime":1582429582421}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KCmltcG9ydCBDb29raWVzIGZyb20gJ2pzLWNvb2tpZScKaW1wb3J0IEtleWNsb2FrIGZyb20gJ2tleWNsb2FrLWpzJwppbXBvcnQgcm91dGVyIGZyb20gJy4uLy4uL3JvdXRlci9pbmRleCcKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogIkxvZ2luIiwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHt9CiAgICB9LAogICAgY29tcHV0ZWQ6IHt9LAogICAgbWV0aG9kczogewogICAgICAgIExvYWREYXRhKCkgewogICAgICAgICAgICBsZXQgcmVmcmVzaFRva2VuID0gQ29va2llcy5nZXQoJ3JlZnJlc2hUb2tlbicpIC8vIOiOt+WPlueUqOaIt+eZu+W9lXRva2VuCiAgICAgICAgICAgIGxldCB0b2tlbiA9IENvb2tpZXMuZ2V0KCd0b2tlbicpIC8vIOiOt+WPlueUqOaIt+eZu+W9lXRva2VuCiAgICAgICAgICAgIGxldCBmb3JtRGF0YSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTsKICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdjbGllbnRfaWQnLCB0aGlzLiRzdG9yZS5zdGF0ZS5jbGllbnRJZCk7CiAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZ3JhbnRfdHlwZScsICdyZWZyZXNoX3Rva2VuJyk7CiAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgncmVmcmVzaF90b2tlbicsIHJlZnJlc2hUb2tlbik7CiAgICAgICAgICAgIGxldCBfdGhpcyA9IHRoaXMKICAgICAgICAgICAgbGV0IGtleWNsb2FrID0gbnVsbDsKICAgICAgICAgICAga2V5Y2xvYWsgPSBLZXljbG9hayh7CiAgICAgICAgICAgICAgICB1cmw6ICdodHRwOi8vdS54bG1lZGlhd2F0Y2guY29tL2F1dGgnLAogICAgICAgICAgICAgICAgcmVhbG06ICd4bHBsYXRmb3JtJywKICAgICAgICAgICAgICAgIGNsaWVudElkOiBfdGhpcy4kc3RvcmUuc3RhdGUuY2xpZW50SWQKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBrZXljbG9hay5pbml0KHtvbkxvYWQ6ICdsb2dpbi1yZXF1aXJlZCd9KS5zdWNjZXNzKGZ1bmN0aW9uIChhdXRoZW50aWNhdGVkKSB7CiAgICAgICAgICAgICAgICBpZiAoIWF1dGhlbnRpY2F0ZWQpIHsKICAgICAgICAgICAgICAgICAgICBhbGVydCgn55m76ZmG5aSx6LSlJykKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgLy/nmbvpmYbmiJDlip8KICAgICAgICAgICAgICAgICAgICBrZXljbG9hay5sb2FkVXNlclByb2ZpbGUoKS5zdWNjZXNzKGRhdGEgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBDb29raWVzLnNldCgndG9rZW4nLCBrZXljbG9hay50b2tlbikKICAgICAgICAgICAgICAgICAgICAgICAgQ29va2llcy5zZXQoJ3JlZnJlc2hUb2tlbicsIGtleWNsb2FrLnJlZnJlc2hUb2tlbikKICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVyLnB1c2goe3BhdGg6ICIvcGFydHNBbmFseXNpcyJ9KQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGFsZXJ0KCforqTor4HkuK3lv4PlvILluLgnKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfSwKICAgIGNyZWF0ZWQoKSB7CiAgICAgICAgdGhpcy5Mb2FkRGF0YSgpCiAgICB9LAogICAgbW91bnRlZCgpIHsKCiAgICB9LAogICAgdXBkYXRlZCgpIHsKICAgIH0KfQo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views/Login","sourcesContent":["<template>\n\n</template>\n\n<script>\n    import Cookies from 'js-cookie'\n    import Keycloak from 'keycloak-js'\n    import router from '../../router/index'\n    export default {\n        name: \"Login\",\n        data() {\n            return {}\n        },\n        computed: {},\n        methods: {\n            LoadData() {\n                let refreshToken = Cookies.get('refreshToken') // 获取用户登录token\n                let token = Cookies.get('token') // 获取用户登录token\n                let formData = new URLSearchParams();\n                formData.append('client_id', this.$store.state.clientId);\n                formData.append('grant_type', 'refresh_token');\n                formData.append('refresh_token', refreshToken);\n                let _this = this\n                let keycloak = null;\n                keycloak = Keycloak({\n                    url: 'http://u.xlmediawatch.com/auth',\n                    realm: 'xlplatform',\n                    clientId: _this.$store.state.clientId\n                });\n\n                keycloak.init({onLoad: 'login-required'}).success(function (authenticated) {\n                    if (!authenticated) {\n                        alert('登陆失败')\n                    } else {\n                        //登陆成功\n                        keycloak.loadUserProfile().success(data => {\n                            Cookies.set('token', keycloak.token)\n                            Cookies.set('refreshToken', keycloak.refreshToken)\n                            router.push({path: \"/partsAnalysis\"})\n                        })\n                    }\n                }).error(function () {\n                    alert('认证中心异常');\n                });\n            }\n        },\n        created() {\n            this.LoadData()\n        },\n        mounted() {\n\n        },\n        updated() {\n        }\n    }\n</script>\n\n<style lang=\"sass\">\n\n</style>\n"]}]}