{"remainingRequest":"/Users/howie/Documents/nlp_web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/howie/Documents/nlp_web/src/views/Layout/EntityIdentification.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/howie/Documents/nlp_web/src/views/Layout/EntityIdentification.vue","mtime":1585021550690},{"path":"/Users/howie/Documents/nlp_web/node_modules/cache-loader/dist/cjs.js","mtime":1571922489860},{"path":"/Users/howie/Documents/nlp_web/node_modules/babel-loader/lib/index.js","mtime":1571922477277},{"path":"/Users/howie/Documents/nlp_web/node_modules/cache-loader/dist/cjs.js","mtime":1571922489860},{"path":"/Users/howie/Documents/nlp_web/node_modules/vue-loader/lib/index.js","mtime":1582429582421}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBhcGkgZnJvbSAnLi4vLi4vYXBpL2FwaScKaW1wb3J0IHBpbnlpbiBmcm9tICJwaW55aW4iOwoKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiBbJ2Zvcm1EYXRhJ10sCiAgbmFtZTogIkVudGl0eUlkZW50aWZpY2F0aW9uIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGF0YTogW10sCiAgICAgIGxpbmtzOiBbXSwKICAgICAgaXNMaXN0OiB0cnVlCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHt9LAogIG1ldGhvZHM6IHsKICAgIHBpbnlpbjogcGlueWluLAogICAgaW5pdEVjaGFydCgpIHsKICAgICAgbGV0IEVudGl0eUlkZW50aWZpY2F0aW9uSWQgPSB0aGlzLiRyZWZzLkVudGl0eUlkZW50aWZpY2F0aW9uSWQ7CiAgICAgIGlmICghRW50aXR5SWRlbnRpZmljYXRpb25JZCkgewogICAgICAgIHJldHVybiBmYWxzZQogICAgICB9CiAgICAgIGNvbnN0IG15Q2hhcnQgPSB0aGlzLiRlY2hhcnRzLmluaXQoRW50aXR5SWRlbnRpZmljYXRpb25JZCk7CiAgICAgIGxldCBvcHRpb24gPSB7CiAgICAgICAgdGl0bGU6IHsKICAgICAgICAgIHRleHQ6ICcnLAogICAgICAgICAgc3VidGV4dDogJycsCiAgICAgICAgICB4OiAncmlnaHQnLAogICAgICAgICAgeTogJ2JvdHRvbScKICAgICAgICB9LAogICAgICAgIC8vIHRvb2x0aXAgOiB7CiAgICAgICAgLy8gfSwKICAgICAgICB0b29sYm94OiB7CiAgICAgICAgICBzaG93OiB0cnVlLAogICAgICAgICAgZmVhdHVyZTogewogICAgICAgICAgICByZXN0b3JlOiB7c2hvdzogdHJ1ZX0sCiAgICAgICAgICAgIG1hZ2ljVHlwZToge3Nob3c6IHRydWUsfSwKICAgICAgICAgICAgc2F2ZUFzSW1hZ2U6IHtzaG93OiB0cnVlfQogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgbGVnZW5kOiB7CiAgICAgICAgICB4OiAnbGVmdCcsCiAgICAgICAgICBkYXRhOiBbJ+WunuS9kycsICflrp7kvZPor40nXQogICAgICAgIH0sCiAgICAgICAgc2VyaWVzOiBbewogICAgICAgICAgdHlwZTogJ2dyYXBoJywKICAgICAgICAgIGxheW91dDogJ2ZvcmNlJywKICAgICAgICAgIGxlZ2VuZEhvdmVyTGluazogdHJ1ZSwKICAgICAgICAgIGZvY3VzTm9kZUFkamFjZW5jeTogdHJ1ZSwKICAgICAgICAgIGZvcmNlOiB7CiAgICAgICAgICAgIHJlcHVsc2lvbjogMzAwCiAgICAgICAgICB9LAogICAgICAgICAgY2F0ZWdvcmllczogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgbmFtZTogJ+WunuS9kycKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIG5hbWU6ICflrp7kvZPor40nCiAgICAgICAgICAgIH0KICAgICAgICAgIF0sCiAgICAgICAgICBpdGVtU3R5bGU6IHsKICAgICAgICAgICAgbm9ybWFsOiB7CiAgICAgICAgICAgICAgYm9yZGVyQ29sb3I6ICcjZmZmJywKICAgICAgICAgICAgICBib3JkZXJXaWR0aDogMSwKICAgICAgICAgICAgICBzaGFkb3dCbHVyOiAxMCwKICAgICAgICAgICAgICBzaGFkb3dDb2xvcjogJ3JnYmEoMCwgMCwgMCwgMC4zKScKICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIGxhYmVsOiB7CiAgICAgICAgICAgIHNob3c6IHRydWUsCiAgICAgICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24gKHBhcmFtcykgewogICAgICAgICAgICAgIHJldHVybiBwYXJhbXMuZGF0YS5zaG93TmFtZSAvL+atpOWkhOS4umxhYmVs6L2s5o2iCiAgICAgICAgICAgIH0KCiAgICAgICAgICB9LAogICAgICAgICAgbGluZVN0eWxlOiB7CiAgICAgICAgICAgIGNvbG9yOiAnc291cmNlJywKICAgICAgICAgICAgY3VydmVuZXNzOiAwLjMKICAgICAgICAgIH0sCiAgICAgICAgICBlbXBoYXNpczogewogICAgICAgICAgICBsaW5lU3R5bGU6IHsKICAgICAgICAgICAgICB3aWR0aDogNQogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgcm9hbTogdHJ1ZSwKICAgICAgICAgIGRhdGE6IHRoaXMuZGF0YSwKICAgICAgICAgIGxpbmtzOiB0aGlzLmxpbmtzLAogICAgICAgIH1dCiAgICAgIH07CiAgICAgIG15Q2hhcnQuc2V0T3B0aW9uKG9wdGlvbiwgdHJ1ZSk7CiAgICB9LAogICAgYXN5bmMgTG9hZERhdGEocmVjb3JkKSB7CiAgICAgIHRyeSB7CiAgICAgICAgdGhpcy5pc0xpc3QgPSB0cnVlCiAgICAgICAgY29uc3QgZGF0YSA9IFtdCiAgICAgICAgdGhpcy5saW5rcyA9IFtdCiAgICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCd0aXRsZScsIHJlY29yZC50aXRsZSk7CiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdjb250ZW50JywgcmVjb3JkLmNvbnRlbnQpOwogICAgICAgIGxldCBpZCA9IDEKICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgYXBpLkVudGl0eUlkZW50aWZpY2F0aW9uTGlzdChmb3JtRGF0YSkKICAgICAgICBpZiAocmVzdWx0LmNvZGUgPT09IDIwMCkgewogICAgICAgICAgbGV0IExpc3QgPSB0aGlzLmRldGVsZU9iamVjdChyZXN1bHQuZGF0YSkKICAgICAgICAgIGlmIChMaXN0Lmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgTGlzdCA9IHRoaXMuZGV0ZWxlT2JqZWN0KExpc3QpCiAgICAgICAgICAgIExpc3QubWFwKCh2LCBpKSA9PiB7CiAgICAgICAgICAgICAgZGF0YS5wdXNoKHsKICAgICAgICAgICAgICAgIGlkOiB2LmNvZGUsCiAgICAgICAgICAgICAgICBzaG93TmFtZTogdi5uYW1lLAogICAgICAgICAgICAgICAgY2F0ZWdvcnk6IDAsCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICBpZiAodi53b3Jkcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICB2LndvcmRzID0gdGhpcy5kZXRlbGVPYmplY3Qodi53b3JkcykKICAgICAgICAgICAgICAgIHYud29yZHMubWFwKChpdGVtLCBqKSA9PiB7CiAgICAgICAgICAgICAgICAgIGRhdGEucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGkgKyBpdGVtLmlkLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBpdGVtLnNjb3JlLAogICAgICAgICAgICAgICAgICAgIHNob3dOYW1lOiBpdGVtLndvcmQsCiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IDEsCiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgICAgbGV0IGl0ZW0gPSBbe25hbWU6ICfmlofmnKwwJywgc2hvd05hbWU6ICfmlofmnKwnLCBjYXRlZ29yeTogMH1dCiAgICAgICAgICAgIHRoaXMuZGF0YSA9IFsuLi5pdGVtLCAuLi5kYXRhXQogICAgICAgICAgICB0aGlzLmRhdGEuZm9yRWFjaCgobm9kZSwgaSkgPT4gewogICAgICAgICAgICAgIGlmIChub2RlLmNhdGVnb3J5ID09PSAwKSB7CiAgICAgICAgICAgICAgICBub2RlLnN5bWJvbFNpemUgPSA1MDsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgbm9kZS5zeW1ib2xTaXplID0gNTAgLyAxLjUgKyBub2RlLnZhbHVlOwogICAgICAgICAgICAgICAgbm9kZS5jYXRlZ29yeSA9IG5vZGUuY2F0ZWdvcnk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgTGlzdC5tYXAoKHYsIGkpID0+IHsKICAgICAgICAgICAgICB0aGlzLmxpbmtzLnB1c2goewogICAgICAgICAgICAgICAgc291cmNlOiB2LmNvZGUsCiAgICAgICAgICAgICAgICB0YXJnZXQ6ICfmlofmnKwwJwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgaWYgKHYud29yZHMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgdi53b3Jkcy5tYXAoKGl0ZW1zLCBrKSA9PiB7CiAgICAgICAgICAgICAgICAgIHRoaXMubGlua3MucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgc291cmNlOiBpICsgaXRlbXMuaWQsCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiB2LmNvZGUsCiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuaXNMaXN0ID0gZmFsc2UKICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgICAgdGhpcy5pbml0RWNoYXJ0KCkKICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29uc29sZS5sb2coZSkKICAgICAgfQogICAgfSwKICAgIGRldGVsZU9iamVjdChvYmopIHsKICAgICAgdmFyIHVuaXF1ZXMgPSBbXTsKICAgICAgdmFyIHN0cmluZ2lmeSA9IHt9OwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iai5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqW2ldKTsKICAgICAgICBrZXlzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICAgIHJldHVybiAoTnVtYmVyKGEpIC0gTnVtYmVyKGIpKTsKICAgICAgICB9KTsKICAgICAgICB2YXIgc3RyID0gJyc7CiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBrZXlzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICBzdHIgKz0gSlNPTi5zdHJpbmdpZnkoa2V5c1tqXSk7CiAgICAgICAgICBzdHIgKz0gSlNPTi5zdHJpbmdpZnkob2JqW2ldW2tleXNbal1dKTsKICAgICAgICB9CiAgICAgICAgaWYgKCFzdHJpbmdpZnkuaGFzT3duUHJvcGVydHkoc3RyKSkgewogICAgICAgICAgdW5pcXVlcy5wdXNoKG9ialtpXSk7CiAgICAgICAgICBzdHJpbmdpZnlbc3RyXSA9IHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICAgIHVuaXF1ZXMgPSB1bmlxdWVzOwogICAgICByZXR1cm4gdW5pcXVlczsKICAgIH0sCiAgfSwKICBjcmVhdGVkKCkgewogICAgaWYgKHRoaXMuZm9ybURhdGEudGl0bGUgfHwgdGhpcy5mb3JtRGF0YS5jb250ZW50KSB7CiAgICAgIHRoaXMuTG9hZERhdGEodGhpcy5mb3JtRGF0YSkKICAgIH0KICB9LAoKICBtb3VudGVkKCkgewogICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4gewogICAgICAgIGlmICh0aGlzLiRyZWZzLkVudGl0eUlkZW50aWZpY2F0aW9uSWQpIHsKICAgICAgICAgIHRoaXMuJGVjaGFydHMuaW5pdCh0aGlzLiRyZWZzLkVudGl0eUlkZW50aWZpY2F0aW9uSWQpLnJlc2l6ZSgpCiAgICAgICAgfQogICAgICB9KQogICAgfSkKICB9LAogIHVwZGF0ZWQoKSB7CiAgfQp9Cg=="},{"version":3,"sources":["EntityIdentification.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EntityIdentification.vue","sourceRoot":"src/views/LayoutTest","sourcesContent":["<template>\n    <div class=\"PartsAnalysis EntityIdentification\">\n        <Card dis-hover class=\"Card\">\n            <p slot=\"title\">实体识别</p>\n            <div ref=\"EntityIdentificationId\" class=\"EntityIdentificationEcharts\">\n\n            </div>\n            <Spin fix v-show=\"isList\">\n                <Icon type=\"ios-loading\" size=18 class=\"demo-spin-icon-load\"></Icon>\n                <div>载入中...</div>\n            </Spin>\n        </Card>\n    </div>\n</template>\n\n<script>\n  import api from '../../api/api'\n  import pinyin from \"pinyin\";\n\n  export default {\n    props: ['formData'],\n    name: \"EntityIdentification\",\n    data() {\n      return {\n        data: [],\n        links: [],\n        isList: true\n      };\n    },\n    computed: {},\n    methods: {\n      pinyin: pinyin,\n      initEchart() {\n        let EntityIdentificationId = this.$refs.EntityIdentificationId;\n        if (!EntityIdentificationId) {\n          return false\n        }\n        const myChart = this.$echarts.init(EntityIdentificationId);\n        let option = {\n          title: {\n            text: '',\n            subtext: '',\n            x: 'right',\n            y: 'bottom'\n          },\n          // tooltip : {\n          // },\n          toolbox: {\n            show: true,\n            feature: {\n              restore: {show: true},\n              magicType: {show: true,},\n              saveAsImage: {show: true}\n            }\n          },\n          legend: {\n            x: 'left',\n            data: ['实体', '实体词']\n          },\n          series: [{\n            type: 'graph',\n            layout: 'force',\n            legendHoverLink: true,\n            focusNodeAdjacency: true,\n            force: {\n              repulsion: 300\n            },\n            categories: [\n              {\n                name: '实体'\n              },\n              {\n                name: '实体词'\n              }\n            ],\n            itemStyle: {\n              normal: {\n                borderColor: '#fff',\n                borderWidth: 1,\n                shadowBlur: 10,\n                shadowColor: 'rgba(0, 0, 0, 0.3)'\n              }\n            },\n            label: {\n              show: true,\n              formatter: function (params) {\n                return params.data.showName //此处为label转换\n              }\n\n            },\n            lineStyle: {\n              color: 'source',\n              curveness: 0.3\n            },\n            emphasis: {\n              lineStyle: {\n                width: 5\n              }\n            },\n            roam: true,\n            data: this.data,\n            links: this.links,\n          }]\n        };\n        myChart.setOption(option, true);\n      },\n      async LoadData(record) {\n        try {\n          this.isList = true\n          const data = []\n          this.links = []\n          let formData = new FormData();\n          formData.append('title', record.title);\n          formData.append('content', record.content);\n          let id = 1\n          let result = await api.EntityIdentificationList(formData)\n          if (result.code === 200) {\n            let List = this.deteleObject(result.data)\n            if (List.length > 0) {\n              List = this.deteleObject(List)\n              List.map((v, i) => {\n                data.push({\n                  id: v.code,\n                  showName: v.name,\n                  category: 0,\n                })\n                if (v.words.length > 0) {\n                  v.words = this.deteleObject(v.words)\n                  v.words.map((item, j) => {\n                    data.push({\n                      id: i + item.id,\n                      value: item.score,\n                      showName: item.word,\n                      category: 1,\n                    })\n                  })\n                }\n              })\n              let item = [{name: '文本0', showName: '文本', category: 0}]\n              this.data = [...item, ...data]\n              this.data.forEach((node, i) => {\n                if (node.category === 0) {\n                  node.symbolSize = 50;\n                } else {\n                  node.symbolSize = 50 / 1.5 + node.value;\n                  node.category = node.category;\n                }\n              });\n              List.map((v, i) => {\n                this.links.push({\n                  source: v.code,\n                  target: '文本0'\n                })\n                if (v.words.length > 0) {\n                  v.words.map((items, k) => {\n                    this.links.push({\n                      source: i + items.id,\n                      target: v.code,\n                    })\n                  })\n                }\n              })\n            }\n            this.isList = false\n            this.$nextTick(() => {\n              this.initEchart()\n            })\n          }\n        } catch (e) {\n          console.log(e)\n        }\n      },\n      deteleObject(obj) {\n        var uniques = [];\n        var stringify = {};\n        for (var i = 0; i < obj.length; i++) {\n          var keys = Object.keys(obj[i]);\n          keys.sort(function (a, b) {\n            return (Number(a) - Number(b));\n          });\n          var str = '';\n          for (var j = 0; j < keys.length; j++) {\n            str += JSON.stringify(keys[j]);\n            str += JSON.stringify(obj[i][keys[j]]);\n          }\n          if (!stringify.hasOwnProperty(str)) {\n            uniques.push(obj[i]);\n            stringify[str] = true;\n          }\n        }\n        uniques = uniques;\n        return uniques;\n      },\n    },\n    created() {\n      if (this.formData.title || this.formData.content) {\n        this.LoadData(this.formData)\n      }\n    },\n\n    mounted() {\n      this.$nextTick(() => {\n        window.addEventListener('resize', () => {\n          if (this.$refs.EntityIdentificationId) {\n            this.$echarts.init(this.$refs.EntityIdentificationId).resize()\n          }\n        })\n      })\n    },\n    updated() {\n    }\n  }\n</script>\n\n<style lang=\"scss\">\n    .EntityIdentification {\n        background-color: #f6f6f6;\n        padding: 20px;\n\n        .Card {\n            .EntityIdentificationEcharts {\n                width: 100%;\n                min-height: 600px;\n            }\n        }\n    }\n</style>\n\n"]}]}