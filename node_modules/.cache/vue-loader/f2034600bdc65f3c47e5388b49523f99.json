{"remainingRequest":"/Users/howie/Documents/nlp_web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/howie/Documents/nlp_web/src/views/LayoutTest/ExtractTheme.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/howie/Documents/nlp_web/src/views/LayoutTest/ExtractTheme.vue","mtime":1585021550760},{"path":"/Users/howie/Documents/nlp_web/node_modules/cache-loader/dist/cjs.js","mtime":1571922489860},{"path":"/Users/howie/Documents/nlp_web/node_modules/babel-loader/lib/index.js","mtime":1571922477277},{"path":"/Users/howie/Documents/nlp_web/node_modules/cache-loader/dist/cjs.js","mtime":1571922489860},{"path":"/Users/howie/Documents/nlp_web/node_modules/vue-loader/lib/index.js","mtime":1582429582421}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBhcGkgZnJvbSAiLi4vLi4vYXBpL2FwaSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkV4dHJhY3RUaGVtZSIsCiAgcHJvcHM6IFsnZm9ybURhdGEnXSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGF0YTogW10sCiAgICAgIGxpbmtzOiBbXSwKICAgICAgaXNMaXN0OiB0cnVlLAogICAgICBpbmR1c3RyeTogJzIyJwogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7fSwKICBtZXRob2RzOiB7CiAgICBpbml0RWNoYXJ0KCkgewogICAgICBsZXQgS2V5d29yZElkID0gdGhpcy4kcmVmcy5LZXl3b3JkSWQ7CiAgICAgIGlmICghS2V5d29yZElkKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0KICAgICAgY29uc3QgbXlDaGFydCA9IHRoaXMuJGVjaGFydHMuaW5pdChLZXl3b3JkSWQpOwogICAgICBsZXQgb3B0aW9uID0gewogICAgICAgIGdyaWQ6IHsKICAgICAgICAgIHRvcDogJzIwJywKICAgICAgICAgIGJvdHRvbTogJzIwJwogICAgICAgIH0sCiAgICAgICAgdGl0bGU6IHsKICAgICAgICAgIHRleHQ6ICcnLAogICAgICAgICAgc3VidGV4dDogJycsCiAgICAgICAgICB4OiAncmlnaHQnLAogICAgICAgICAgeTogJ2JvdHRvbScKICAgICAgICB9LAogICAgICAgIHRvb2x0aXA6IHsKICAgICAgICAgIHNob3c6IGZhbHNlLAogICAgICAgIH0sCiAgICAgICAgdG9vbGJveDogewogICAgICAgICAgc2hvdzogdHJ1ZSwKICAgICAgICAgIGZlYXR1cmU6IHsKICAgICAgICAgICAgcmVzdG9yZToge3Nob3c6IHRydWV9LAogICAgICAgICAgICBtYWdpY1R5cGU6IHtzaG93OiB0cnVlLH0sCiAgICAgICAgICAgIHNhdmVBc0ltYWdlOiB7c2hvdzogdHJ1ZX0KICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGxlZ2VuZDogewogICAgICAgICAgeDogJ2xlZnQnLAogICAgICAgICAgZGF0YTogWyfniLboioLngrknLCAn5a2Q6IqC54K5J10KICAgICAgICB9LAogICAgICAgIHNlcmllczogW3sKICAgICAgICAgIHR5cGU6ICdncmFwaCcsCiAgICAgICAgICBsYXlvdXQ6ICdmb3JjZScsCiAgICAgICAgICBsZWdlbmRIb3Zlckxpbms6IHRydWUsCiAgICAgICAgICBmb2N1c05vZGVBZGphY2VuY3k6IHRydWUsCiAgICAgICAgICBzeW1ib2xTaXplOiA0MCwKICAgICAgICAgIGZvcmNlOiB7CiAgICAgICAgICAgIHJlcHVsc2lvbjogNjAwCiAgICAgICAgICB9LAogICAgICAgICAgY2F0ZWdvcmllczogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgbmFtZTogJ+eItuiKgueCuScKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIG5hbWU6ICflrZDoioLngrknCiAgICAgICAgICAgIH0KICAgICAgICAgIF0sCiAgICAgICAgICBpdGVtU3R5bGU6IHsKICAgICAgICAgICAgbm9ybWFsOiB7CiAgICAgICAgICAgICAgYm9yZGVyQ29sb3I6ICcjZmZmJywKICAgICAgICAgICAgICBib3JkZXJXaWR0aDogMSwKICAgICAgICAgICAgICBzaGFkb3dCbHVyOiAxMCwKICAgICAgICAgICAgICBzaGFkb3dDb2xvcjogJ3JnYmEoMCwgMCwgMCwgMC4zKScKICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIGxhYmVsIDogewogICAgICAgICAgICBzaG93IDogdHJ1ZSwKICAgICAgICAgIH0sCiAgICAgICAgICBsaW5lU3R5bGU6IHsKICAgICAgICAgICAgY29sb3I6ICdzb3VyY2UnLAogICAgICAgICAgICBjdXJ2ZW5lc3M6IDAuMwogICAgICAgICAgfSwKICAgICAgICAgIGVtcGhhc2lzOiB7CiAgICAgICAgICAgIGxpbmVTdHlsZTogewogICAgICAgICAgICAgIHdpZHRoOiA1CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICByb2FtIDogZmFsc2UsCiAgICAgICAgICBkYXRhOiB0aGlzLmRhdGEsCiAgICAgICAgICBsaW5rczogdGhpcy5saW5rcywKICAgICAgICB9XQogICAgICB9OwogICAgICBteUNoYXJ0LnNldE9wdGlvbihvcHRpb24sIHRydWUpOwogICAgfSwKICAgIGFzeW5jIExvYWREYXRhKHJlY29yZCkgewogICAgICB0cnkgewogICAgICAgIHRoaXMuZGF0YSA9IFtdCiAgICAgICAgdGhpcy5saW5rcyA9IFtdCiAgICAgICAgdGhpcy5pc0xpc3QgPSB0cnVlCiAgICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCd0aXRsZScsIHJlY29yZC50aXRsZSk7CiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdjb250ZW50JywgcmVjb3JkLmNvbnRlbnQpOwogICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCBhcGkuZXh0cmFjdFRoZW1lTGlzdChmb3JtRGF0YSkKICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpCiAgICAgICAgaWYgKHJlc3VsdC5jb2RlID09PSAyMDApIHsKICAgICAgICAgIHRoaXMubGlzdERhdGEgPSByZXN1bHQuZGF0YQogICAgICAgICAgbGV0IGRhdGEgPSBbCiAgICAgICAgICAgIHtuYW1lOiAn5Li76aKYJywgY2F0ZWdvcnk6IDB9LAogICAgICAgICAgXQogICAgICAgICAgaWYgKHRoaXMubGlzdERhdGEubGVuZ3RoID4gMCkgewogICAgICAgICAgICB0aGlzLmxpc3REYXRhLm1hcCgodiwgaSkgPT4gewogICAgICAgICAgICAgIHRoaXMuZGF0YS5wdXNoKHsKICAgICAgICAgICAgICAgIG5hbWU6IHYsCiAgICAgICAgICAgICAgICBjYXRlZ29yeTogMSwKICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIHRoaXMubGlua3MucHVzaCh7CiAgICAgICAgICAgICAgICBzb3VyY2U6IHYsCiAgICAgICAgICAgICAgICB0YXJnZXQ6ICLkuLvpopgiLAogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIHRoaXMuZGF0YSA9IFsuLi5kYXRhLCAuLi50aGlzLmRhdGFdCiAgICAgICAgICAgIHRoaXMuZGF0YS5mb3JFYWNoKChub2RlKSA9PiB7CiAgICAgICAgICAgICAgaWYgKG5vZGUuY2F0ZWdvcnkgPT09IDApIHsKICAgICAgICAgICAgICAgIG5vZGUuc3ltYm9sU2l6ZSA9IDUwOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBub2RlLnN5bWJvbFNpemUgPSA2MAogICAgICAgICAgICAgICAgbm9kZS5zeW1ib2xTaXplIC89IDEuNTsKICAgICAgICAgICAgICAgIG5vZGUubGFiZWwgPSB7CiAgICAgICAgICAgICAgICAgIG5vcm1hbDogewogICAgICAgICAgICAgICAgICAgIHNob3c6IG5vZGUuc3ltYm9sU2l6ZSA+IDMwCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBub2RlLml0ZW1TdHlsZSA9IG51bGw7CiAgICAgICAgICAgICAgbm9kZS5jYXRlZ29yeSA9IG5vZGUuY2F0ZWdvcnk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5kYXRhID0gW10KICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLmlzTGlzdCA9IGZhbHNlCiAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuaW5pdEVjaGFydCgpCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUubG9nKGUpCiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICBpZiAodGhpcy5mb3JtRGF0YS50aXRsZSAmJiB0aGlzLmZvcm1EYXRhLmNvbnRlbnQpIHsKICAgICAgdGhpcy5Mb2FkRGF0YSh0aGlzLmZvcm1EYXRhKQogICAgfQogIH0sCgogIG1vdW50ZWQoKSB7CiAgfSwKICB1cGRhdGVkKCkgewogIH0KfQo="},{"version":3,"sources":["ExtractTheme.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"ExtractTheme.vue","sourceRoot":"src/views/LayoutTest","sourcesContent":["<template>\n    <div class=\"PartsAnalysis\">\n        <Card dis-hover class=\"Card\">\n            <p slot=\"title\">主题提取</p>\n            <div v-if=\"data.length > 0\">\n                <div ref=\"KeywordId\" class=\"KeywordEcharts\">\n                </div>\n            </div>\n            <div class=\"KeywordElse\" v-else>\n                <div>未提取到主题</div>\n            </div>\n            <Spin fix v-show=\"isList\">\n                <Icon type=\"ios-loading\" size=18 class=\"demo-spin-icon-load\"></Icon>\n                <div>载入中...</div>\n            </Spin>\n\n        </Card>\n    </div>\n</template>\n\n<script>\n  import api from \"../../api/api\";\n\n  export default {\n    name: \"ExtractTheme\",\n    props: ['formData'],\n    data() {\n      return {\n        data: [],\n        links: [],\n        isList: true,\n        industry: '22'\n      };\n    },\n    computed: {},\n    methods: {\n      initEchart() {\n        let KeywordId = this.$refs.KeywordId;\n        if (!KeywordId) {\n          return false\n        }\n        const myChart = this.$echarts.init(KeywordId);\n        let option = {\n          grid: {\n            top: '20',\n            bottom: '20'\n          },\n          title: {\n            text: '',\n            subtext: '',\n            x: 'right',\n            y: 'bottom'\n          },\n          tooltip: {\n            show: false,\n          },\n          toolbox: {\n            show: true,\n            feature: {\n              restore: {show: true},\n              magicType: {show: true,},\n              saveAsImage: {show: true}\n            }\n          },\n          legend: {\n            x: 'left',\n            data: ['父节点', '子节点']\n          },\n          series: [{\n            type: 'graph',\n            layout: 'force',\n            legendHoverLink: true,\n            focusNodeAdjacency: true,\n            symbolSize: 40,\n            force: {\n              repulsion: 600\n            },\n            categories: [\n              {\n                name: '父节点'\n              },\n              {\n                name: '子节点'\n              }\n            ],\n            itemStyle: {\n              normal: {\n                borderColor: '#fff',\n                borderWidth: 1,\n                shadowBlur: 10,\n                shadowColor: 'rgba(0, 0, 0, 0.3)'\n              }\n            },\n            label : {\n              show : true,\n            },\n            lineStyle: {\n              color: 'source',\n              curveness: 0.3\n            },\n            emphasis: {\n              lineStyle: {\n                width: 5\n              }\n            },\n            roam : false,\n            data: this.data,\n            links: this.links,\n          }]\n        };\n        myChart.setOption(option, true);\n      },\n      async LoadData(record) {\n        try {\n          this.data = []\n          this.links = []\n          this.isList = true\n          let formData = new FormData();\n          formData.append('title', record.title);\n          formData.append('content', record.content);\n          let result = await api.extractThemeList(formData)\n          console.log(result)\n          if (result.code === 200) {\n            this.listData = result.data\n            let data = [\n              {name: '主题', category: 0},\n            ]\n            if (this.listData.length > 0) {\n              this.listData.map((v, i) => {\n                this.data.push({\n                  name: v,\n                  category: 1,\n                })\n                this.links.push({\n                  source: v,\n                  target: \"主题\",\n                })\n              })\n              this.data = [...data, ...this.data]\n              this.data.forEach((node) => {\n                if (node.category === 0) {\n                  node.symbolSize = 50;\n                } else {\n                  node.symbolSize = 60\n                  node.symbolSize /= 1.5;\n                  node.label = {\n                    normal: {\n                      show: node.symbolSize > 30\n                    }\n                  };\n\n                }\n                node.itemStyle = null;\n                node.category = node.category;\n              });\n            } else {\n              this.data = []\n            }\n\n            this.isList = false\n            this.$nextTick(() => {\n              this.initEchart()\n            })\n          }\n        } catch (e) {\n          console.log(e)\n        }\n      }\n    },\n    created() {\n      if (this.formData.title && this.formData.content) {\n        this.LoadData(this.formData)\n      }\n    },\n\n    mounted() {\n    },\n    updated() {\n    }\n  }\n</script>\n\n<style lang=\"scss\">\n    .PartsAnalysis {\n        background-color: #f6f6f6;\n        min-height: 300px;\n        padding: 20px;\n\n        .KeywordElse {\n            height: 300px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n        }\n\n        .Card {\n            .KeywordEcharts {\n                height: 300px;\n            }\n        }\n    }\n</style>\n\n"]}]}