{"remainingRequest":"/Users/howie/Documents/nlp_web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/howie/Documents/nlp_web/src/views/SubjectExtract.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/howie/Documents/nlp_web/src/views/SubjectExtract.vue","mtime":1582429519251},{"path":"/Users/howie/Documents/nlp_web/node_modules/cache-loader/dist/cjs.js","mtime":1571922489860},{"path":"/Users/howie/Documents/nlp_web/node_modules/babel-loader/lib/index.js","mtime":1571922477277},{"path":"/Users/howie/Documents/nlp_web/node_modules/cache-loader/dist/cjs.js","mtime":1571922489860},{"path":"/Users/howie/Documents/nlp_web/node_modules/vue-loader/lib/index.js","mtime":1582429582421}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBhcGkgZnJvbSAiLi4vYXBpL2FwaSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlN1YmplY3RFeHRyYWN0IiwKICBwcm9wczogWydmb3JtRGF0YSddLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkYXRhOiBbXSwKICAgICAgbGlua3M6IFtdLAogICAgICBpc0xpc3Q6IHRydWUsCiAgICAgIGluZHVzdHJ5OiAnMjInCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHt9LAogIG1ldGhvZHM6IHsKICAgIGluaXRFY2hhcnQoKSB7CiAgICAgIGxldCBLZXl3b3JkSWQgPSB0aGlzLiRyZWZzLktleXdvcmRJZDsKICAgICAgaWYgKCFLZXl3b3JkSWQpIHsKICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgfQogICAgICBjb25zdCBteUNoYXJ0ID0gdGhpcy4kZWNoYXJ0cy5pbml0KEtleXdvcmRJZCk7CiAgICAgIGxldCBvcHRpb24gPSB7CgogICAgICAgIGdyaWQ6IHsKICAgICAgICAgIHRvcDogJzIwJywKICAgICAgICAgIGJvdHRvbTogJzIwJwogICAgICAgIH0sCiAgICAgICAgdGl0bGUgOiB7CiAgICAgICAgICB0ZXh0IDogJycsCiAgICAgICAgICBzdWJ0ZXh0IDogJycsCiAgICAgICAgICB4IDogJ3JpZ2h0JywKICAgICAgICAgIHkgOiAnYm90dG9tJwogICAgICAgIH0sCiAgICAgICAgdG9vbHRpcCA6IHsKICAgICAgICAgIHNob3c6IGZhbHNlLAogICAgICAgIH0sCiAgICAgICAgdG9vbGJveCA6IHsKICAgICAgICAgIHNob3cgOiB0cnVlLAogICAgICAgICAgZmVhdHVyZSA6IHsKICAgICAgICAgICAgcmVzdG9yZSA6IHsgc2hvdyA6IHRydWUgfSwKICAgICAgICAgICAgbWFnaWNUeXBlIDogeyBzaG93IDogdHJ1ZSx9LAogICAgICAgICAgICBzYXZlQXNJbWFnZSA6IHsgc2hvdyA6IHRydWUgfQogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgbGVnZW5kIDogewogICAgICAgICAgeCA6ICdsZWZ0JywKICAgICAgICAgIGRhdGEgOiBbJ+eItuiKgueCuScsICflrZDoioLngrknXQogICAgICAgIH0sCiAgICAgICAgc2VyaWVzIDogW3sKICAgICAgICAgIHR5cGU6ICdncmFwaCcsCiAgICAgICAgICBsYXlvdXQ6ICdmb3JjZScsCiAgICAgICAgICBsZWdlbmRIb3Zlckxpbms6IHRydWUsCiAgICAgICAgICBmb2N1c05vZGVBZGphY2VuY3k6IHRydWUsCiAgICAgICAgICBzeW1ib2xTaXplOiA0MCwKICAgICAgICAgIGZvcmNlOiB7CiAgICAgICAgICAgIHJlcHVsc2lvbjogNjAwCiAgICAgICAgICB9LAogICAgICAgICAgY2F0ZWdvcmllcyA6IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgIG5hbWUgOiAn54i26IqC54K5JwogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgbmFtZSA6ICflrZDoioLngrknCiAgICAgICAgICAgIH0KICAgICAgICAgIF0sCiAgICAgICAgICBpdGVtU3R5bGUgOiB7CiAgICAgICAgICAgIG5vcm1hbCA6IHsKICAgICAgICAgICAgICBsYWJlbCA6IHsKICAgICAgICAgICAgICAgIHNob3cgOiB0cnVlLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgbm9kZVN0eWxlIDogewogICAgICAgICAgICAgICAgYnJ1c2hUeXBlIDogJ2JvdGgnLAogICAgICAgICAgICAgICAgYm9yZGVyQ29sb3IgOiAncmdiYSgyNTUsMjE1LDAsMC40KScsCiAgICAgICAgICAgICAgICBib3JkZXJXaWR0aCA6IDEKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGxpbmVTdHlsZTogewogICAgICAgICAgICAgICAgY29sb3I6ICdzb3VyY2UnLAogICAgICAgICAgICAgICAgY3VydmVuZXNzOiAwLjMKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICBlbXBoYXNpczogewogICAgICAgICAgICAgIGxpbmVTdHlsZTogewogICAgICAgICAgICAgICAgd2lkdGg6IDEwCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgcm9hbSA6IHRydWUsCiAgICAgICAgICBkYXRhIDogdGhpcy5kYXRhLAogICAgICAgICAgbGlua3MgOiB0aGlzLmxpbmtzLAogICAgICAgIH1dCiAgICAgIH07CiAgICAgIG15Q2hhcnQuc2V0T3B0aW9uKG9wdGlvbiwgdHJ1ZSk7CiAgICB9LAogICAgYXN5bmMgTG9hZERhdGEocmVjb3JkKSB7CiAgICAgIHRyeSB7CiAgICAgICAgdGhpcy5pc0xpc3QgPSB0cnVlCiAgICAgICAgdGhpcy5kYXRhID0gW10KICAgICAgICB0aGlzLmxpbmtzID0gW10KICAgICAgICBsZXQgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ3RpdGxlJywgcmVjb3JkLnRpdGxlKTsKICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2NvbnRlbnQnLHJlY29yZC5jb250ZW50KTsKICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2luZHVzdHJ5JywgdGhpcy5pbmR1c3RyeSA9PSAnMCcgPyAnJyA6IHRoaXMuaW5kdXN0cnkpOwogICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCBhcGkuU3ViamVjdEV4dHJhY3RMaXN0KGZvcm1EYXRhKQogICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCkKICAgICAgICBpZiAocmVzdWx0LmNvZGUgPT09IDIwMCkgewogICAgICAgICAgaWYgKHJlc3VsdC5kYXRhLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgcmVzdWx0LmRhdGEubWFwKCh2LCBpKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5kYXRhLnB1c2goewogICAgICAgICAgICAgICAgbmFtZTogdi5uYW1lLAogICAgICAgICAgICAgICAgY2F0ZWdvcnk6IDEsCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB0aGlzLmxpbmtzLnB1c2goewogICAgICAgICAgICAgICAgc291cmNlOiB2Lm5hbWUsCiAgICAgICAgICAgICAgICB0YXJnZXQ6ICLkuLvkvZMiLAogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIGxldCBkYXRhID0gW3tuYW1lOiAn5Li75L2TJywgY2F0ZWdvcnk6IDB9XQogICAgICAgICAgICB0aGlzLmRhdGEgPSBbLi4uZGF0YSwgLi4udGhpcy5kYXRhXQogICAgICAgICAgICB0aGlzLmRhdGEuZm9yRWFjaCgobm9kZSkgPT4gewogICAgICAgICAgICAgIGlmIChub2RlLmNhdGVnb3J5ID09PSAwKSB7CiAgICAgICAgICAgICAgICBub2RlLnN5bWJvbFNpemUgPSA1MDsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgbm9kZS5zeW1ib2xTaXplID0gNjAKICAgICAgICAgICAgICAgIG5vZGUuc3ltYm9sU2l6ZSAvPSAxLjU7CiAgICAgICAgICAgICAgICBub2RlLmxhYmVsID0gewogICAgICAgICAgICAgICAgICBub3JtYWw6IHsKICAgICAgICAgICAgICAgICAgICBzaG93OiBub2RlLnN5bWJvbFNpemUgPiAzMAogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgbm9kZS5pdGVtU3R5bGUgPSBudWxsOwogICAgICAgICAgICAgIG5vZGUuY2F0ZWdvcnkgPSBub2RlLmNhdGVnb3J5OwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuZGF0YSA9IFtdCiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmlzTGlzdCA9IGZhbHNlCiAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuaW5pdEVjaGFydCgpCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUubG9nKGUpCiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICBpZiAodGhpcy5mb3JtRGF0YS50aXRsZSAmJiB0aGlzLmZvcm1EYXRhLmNvbnRlbnQpIHsKICAgICAgdGhpcy5Mb2FkRGF0YSh0aGlzLmZvcm1EYXRhKQogICAgfQogIH0sCgogIG1vdW50ZWQoKSB7CiAgfSwKICB1cGRhdGVkKCkgewogIH0KfQo="},{"version":3,"sources":["SubjectExtract.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAmBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"SubjectExtract.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class=\"PartsAnalysis\">\n        <Card dis-hover class=\"Card\">\n            <p slot=\"title\">主体提取</p>\n            <div ref=\"KeywordId\" class=\"KeywordEcharts\" v-if=\"data.length > 0\">\n            </div>\n            <div class=\"KeywordElse\" v-else>\n                <div>未提取到主体</div>\n            </div>\n            <Spin fix v-show=\"isList\">\n                <Icon type=\"ios-loading\" size=18 class=\"demo-spin-icon-load\"></Icon>\n                <div>Loading</div>\n            </Spin>\n\n        </Card>\n    </div>\n</template>\n\n<script>\n  import api from \"../api/api\";\n\n  export default {\n    name: \"SubjectExtract\",\n    props: ['formData'],\n    data() {\n      return {\n        data: [],\n        links: [],\n        isList: true,\n        industry: '22'\n      };\n    },\n    computed: {},\n    methods: {\n      initEchart() {\n        let KeywordId = this.$refs.KeywordId;\n        if (!KeywordId) {\n          return false\n        }\n        const myChart = this.$echarts.init(KeywordId);\n        let option = {\n\n          grid: {\n            top: '20',\n            bottom: '20'\n          },\n          title : {\n            text : '',\n            subtext : '',\n            x : 'right',\n            y : 'bottom'\n          },\n          tooltip : {\n            show: false,\n          },\n          toolbox : {\n            show : true,\n            feature : {\n              restore : { show : true },\n              magicType : { show : true,},\n              saveAsImage : { show : true }\n            }\n          },\n          legend : {\n            x : 'left',\n            data : ['父节点', '子节点']\n          },\n          series : [{\n            type: 'graph',\n            layout: 'force',\n            legendHoverLink: true,\n            focusNodeAdjacency: true,\n            symbolSize: 40,\n            force: {\n              repulsion: 600\n            },\n            categories : [\n              {\n                name : '父节点'\n              },\n              {\n                name : '子节点'\n              }\n            ],\n            itemStyle : {\n              normal : {\n                label : {\n                  show : true,\n                },\n                nodeStyle : {\n                  brushType : 'both',\n                  borderColor : 'rgba(255,215,0,0.4)',\n                  borderWidth : 1\n                },\n                lineStyle: {\n                  color: 'source',\n                  curveness: 0.3\n                },\n              },\n              emphasis: {\n                lineStyle: {\n                  width: 10\n                }\n              }\n            },\n            roam : true,\n            data : this.data,\n            links : this.links,\n          }]\n        };\n        myChart.setOption(option, true);\n      },\n      async LoadData(record) {\n        try {\n          this.isList = true\n          this.data = []\n          this.links = []\n          let formData = new FormData();\n          formData.append('title', record.title);\n          formData.append('content',record.content);\n          formData.append('industry', this.industry == '0' ? '' : this.industry);\n          let result = await api.SubjectExtractList(formData)\n          console.log(result)\n          if (result.code === 200) {\n            if (result.data.length > 0) {\n              result.data.map((v, i) => {\n                this.data.push({\n                  name: v.name,\n                  category: 1,\n                })\n                this.links.push({\n                  source: v.name,\n                  target: \"主体\",\n                })\n              })\n              let data = [{name: '主体', category: 0}]\n              this.data = [...data, ...this.data]\n              this.data.forEach((node) => {\n                if (node.category === 0) {\n                  node.symbolSize = 50;\n                } else {\n                  node.symbolSize = 60\n                  node.symbolSize /= 1.5;\n                  node.label = {\n                    normal: {\n                      show: node.symbolSize > 30\n                    }\n                  };\n\n                }\n                node.itemStyle = null;\n                node.category = node.category;\n              });\n            } else {\n              this.data = []\n            }\n            this.isList = false\n            this.$nextTick(() => {\n              this.initEchart()\n            })\n          }\n        } catch (e) {\n          console.log(e)\n        }\n      }\n    },\n    created() {\n      if (this.formData.title && this.formData.content) {\n        this.LoadData(this.formData)\n      }\n    },\n\n    mounted() {\n    },\n    updated() {\n    }\n  }\n</script>\n\n<style lang=\"scss\">\n    .PartsAnalysis {\n        background-color: #f6f6f6;\n        min-height: 300px;\n        padding: 20px;\n        .KeywordElse{\n            height: 300px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n        }\n        .Card {\n            .KeywordEcharts {\n                height: 300px;\n            }\n        }\n    }\n</style>\n\n"]}]}